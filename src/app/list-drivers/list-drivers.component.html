<h1>List Drivers</h1>
{{listDrivers | json}}

<h2>Tables drivers</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Image</th>
      <th scope="col">phone #</th>
      <th scope="col">Number of tasks</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let driver of listDrivers">

      <tr  [ngClass]="{selected : driver === currentDriver}" (click)="currentDriver = driver">
        <td>{{driver.name}}</td>
        <td><img src="../../assets/blank-profile-picture.png" alt="empty profile picture" width="64px"></td>
        <td>{{driver.phone}}</td>
        <td>{{driver.tasks.length}}</td>
      </tr>
    </ng-container>
  </tbody>
</table>

<!--
<agm-map  [latitude]="lat" [longitude]="lng">
  <agm-marker [latitude]="lat" [longitude]="lat"></agm-marker>


</agm-map> -->
<agm-map *ngIf="currentDriver" [latitude]="currentDriver.location.lat" [longitude]="currentDriver.location.lng"  >
  <agm-marker [latitude]="currentDriver.location.lat" [longitude]="currentDriver.location.lng">
    <agm-info-window>{{currentDriver.name+" - current place"}}</agm-info-window>
  </agm-marker>
  <ng-container *ngFor="let task of currentDriver.tasks ">

    <agm-marker [latitude]="task.location.lat" [longitude]="task.location.lng">
      <agm-info-window>{{task.id}}</agm-info-window>
    </agm-marker>
  </ng-container>

</agm-map>
